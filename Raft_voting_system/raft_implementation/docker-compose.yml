version: '3.8'

services:
  node1:
    build: .
    container_name: raft_node1
    hostname: node1
    command: ["1"]
    networks:
      - raft-network
    ports:
      - "50051:50051"
    environment:
      - NODE_ID=1
    restart: unless-stopped

  node2:
    build: .
    container_name: raft_node2
    hostname: node2
    command: ["2"]
    networks:
      - raft-network
    ports:
      - "50052:50052"
    environment:
      - NODE_ID=2
    restart: unless-stopped

  node3:
    build: .
    container_name: raft_node3
    hostname: node3
    command: ["3"]
    networks:
      - raft-network
    ports:
      - "50053:50053"
    environment:
      - NODE_ID=3
    restart: unless-stopped

  node4:
    build: .
    container_name: raft_node4
    hostname: node4
    command: ["4"]
    networks:
      - raft-network
    ports:
      - "50054:50054"
    environment:
      - NODE_ID=4
    restart: unless-stopped

  node5:
    build: .
    container_name: raft_node5
    hostname: node5
    command: ["5"]
    networks:
      - raft-network
    ports:
      - "50055:50055"
    environment:
      - NODE_ID=5
    restart: unless-stopped

networks:
  raft-network:
    driver: bridge
